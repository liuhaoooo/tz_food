{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/1/Desktop/tz_food/uniapp/pages/index/index.vue?16db","webpack:///C:/Users/1/Desktop/tz_food/uniapp/pages/index/index.vue?2070","webpack:///C:/Users/1/Desktop/tz_food/uniapp/pages/index/index.vue?fbb6","uni-app:///pages/index/index.vue","webpack:///C:/Users/1/Desktop/tz_food/uniapp/pages/index/index.vue?ee92","webpack:///C:/Users/1/Desktop/tz_food/uniapp/pages/index/index.vue?fce4"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,mPAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA0vB,CAAgB,+wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqC9wB;AACA;;;;;AAKA;;AAEA,iE;;;AAGA;AACA;AACA,oBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,2BADA;AAEA,yBAFA;AAGA,2BAHA;AAIA,sBAJA;AAKA,qBALA;AAMA,iBANA;;AAQA,GAbA;AAcA,QAdA,oBAcA;AACA;AACA,GAhBA;AAiBA,SAjBA,qBAiBA;AACA;AACA,GAnBA;AAoBA;AACA,gEADA;AAEA,WAFA,qBAEA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA,iBAHA;AAIA,kBAJA;AAKA;AACA,gCADA,GACA,kCANA;AAOA;AACA,2BADA;AAEA,gGAFA;AAGA,uBAHA;AAIA,sBAJA;AAKA,UAZA;;AAcA;AACA,KAlBA,GApBA;;AAwCA;AACA,sDADA;AAEA;AACA,aAHA,uBAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA,SANA;;AAQA,KAbA;AAcA,WAdA,qBAcA;AACA;AACA;AACA,mCADA;AAEA;AACA;AACA;AACA,SALA;AAMA;AACA;AACA;AACA,qCADA;AAEA,cAFA,CAEA;AACA;AACA,WAJA;AAKA,SAbA;;AAeA,KA/BA;AAgCA;AACA,mBAjCA,6BAiCA;AACA;AACA,qBADA;AAEA;AACA;AACA;AACA,SALA;;AAOA;AACA,4BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,cAFA,CAEA;AACA;AACA;AACA,WALA,CADA;AAOA,SAZA;;AAcA,KA1DA;AA2DA;AACA,cA5DA,sBA4DA,EA5DA,EA4DA,KA5DA,EA4DA;AACA;AACA,0EADA;;AAGA,KAhEA;AAiEA,kBAjEA,4BAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;;AAQA,KA1EA,GAxCA,E;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAA0kC,CAAgB,okCAAG,EAAC,C;;;;;;;;;;;ACA9lC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components = {\n  uniIcons: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<view>\r\n    <van-dialog id=\"van-dialog\" />\r\n    <!--header-->\r\n    <view class=\"headerinfo\"></view>\r\n    <!--map-->\r\n    <view class=\"map\">\r\n        <view>\r\n            <uni-icons type=\"loop\" size=\"20\" color=\"#f37b1d\" @tap=\"refreshLocation\"></uni-icons>\r\n            <view style=\"flex:1;color:#999;margin-left:10rpx\" @tap=\"selectLocation\">当前位置：{{addressName}}</view>\r\n            <uni-icons type=\"forward\" size=\"20\" color=\"#f37b1d\" @tap=\"selectLocation\"></uni-icons>\r\n        </view>\r\n        <map style=\"width: 100%; height: 240rpx;\" :latitude=\"latitude\" :longitude=\"longitude\" :markers=\"markers\"></map>\r\n    </view>\r\n\r\n    <!--商家-->\r\n    <skeleton banner :row=\"0\" animate :loading=\"false\" style=\"margin-top:24rpx;\">\r\n        <view class=\"foodList-content\">\r\n            <view v-if=\"getDataLoading\" class=\"loading-page\">\r\n                <van-loading color=\"#333\" size=\"80rpx\">加载中...</van-loading>\r\n            </view>\r\n            <view v-else>\r\n                <list v-if=\"busData.length>0\">\r\n                    <view @tap=\"clickStore(item.bus_id,item.bus_image)\" v-for=\"item in busData\" :key=\"item.bus_id\">\r\n                        <subCard :title=\"item.bus_name\" :text=\"item.bus_name\" :url=\"item.bus_image||'../../static/images/tmp_sub.jpg'\"></subCard>\r\n                    </view>\r\n                </list>\r\n                <van-empty description=\"暂无数据\" v-else><button type=\"default\" size=\"mini\">刷新试试</button></van-empty>\r\n            </view>\r\n\r\n        </view>\r\n    </skeleton>\r\n\r\n</view>\r\n</template>\r\n\r\n<script>\r\nimport Dialog from '@vant/weapp/dist/dialog/dialog';\r\nimport {\r\n    mapActions,\r\n    mapState,\r\n    mapGetters\r\n} from \"vuex\";\r\nimport amap from \"../../sdk/amap-wx.js\";\r\nimport subCard from \"./subCard\";\r\nimport {\r\n    amapKey\r\n} from \"../../config/config\";\r\nexport default {\r\n    components: {\r\n        subCard\r\n    },\r\n    data() {\r\n        return {\r\n            getDataLoading: false,\r\n            latitude: 22.794449,\r\n            longitude: 113.546099,\r\n            amapPlugin: null,\r\n            addressName: \"\",\r\n            busData: {},\r\n        };\r\n    },\r\n    onShow() {\r\n        this.get_openid();\r\n    },\r\n    mounted() {\r\n        this.getAuth();\r\n    },\r\n    computed: {\r\n        ...mapGetters([\"device_info\", \"userData\", \"location\"]),\r\n        markers() {\r\n            let marker = Object.assign({}, marker, {\r\n                latitude: this.latitude,\r\n                longitude: this.longitude,\r\n                width: 40,\r\n                height: 40,\r\n                iconPath: this.userData.id != null ?\r\n                    this.userData.avatar_url : \"../../static/images/pos_icon.png\",\r\n                callout: this.userData.id != null ? {\r\n                    display: \"ALWAYS\",\r\n                    content: `${this.userData.department}：${this.userData.user_name}`,\r\n                    color: \"#666\",\r\n                    fontSize: 16\r\n                } : {}\r\n            });\r\n            return [marker];\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions([\"get_openid\", \"get_buslist\"]),\r\n        //跳转页面选择权限\r\n        toGetAuth() {\r\n            this.getAuth();\r\n            uni.openSetting({\r\n                success: res => {\r\n                    if (res.authSetting[\"scope.userLocation\"]) {\r\n                        Dialog.close()\r\n                        this.refreshLocation();\r\n                    } else {}\r\n                }\r\n            });\r\n        },\r\n        getAuth() {\r\n            this.getDataLoading = true\r\n            uni.authorize({\r\n                scope: \"scope.userLocation\",\r\n                success: () => {\r\n                    this.refreshLocation();\r\n                    Dialog.close()\r\n                },\r\n                fail: () => {\r\n                    this.getDataLoading = false\r\n                    Dialog.alert({\r\n                        message: '需要地理位置授权才能获取商家'\r\n                    }).then(() => {\r\n                        this.toGetAuth()\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        //刷新位置\r\n        refreshLocation() {\r\n            uni.getLocation({\r\n                type: \"wgs84\",\r\n                success: res => {\r\n                    this.longitude = res.longitude;\r\n                    this.latitude = res.latitude;\r\n                }\r\n            });\r\n            this.amapPlugin = new amap.AMapWX({\r\n                key: amapKey\r\n            });\r\n            this.amapPlugin.getRegeo({\r\n                success: data => {\r\n                    this.addressName = data[0].name;\r\n                    let addr = data[0].regeocodeData.addressComponent.city;\r\n                    addr && this.$store.commit('SET_LOCATION', addr)\r\n                    addr &&\r\n                        this.get_buslist({\r\n                            area: this.location\r\n                        }).then(res => {\r\n                            this.busData = res;\r\n                            this.getDataLoading = false\r\n                        });\r\n                }\r\n            });\r\n        },\r\n        //点击商家\r\n        clickStore(id, image) {\r\n            uni.navigateTo({\r\n                url: `/pages/select/index?id=${id}&image=${image}`\r\n            });\r\n        },\r\n        selectLocation() {\r\n            uni.chooseLocation({\r\n                success: res => {\r\n                    console.log(\"位置名称：\" + res.name);\r\n                    console.log(\"详细地址：\" + res.address);\r\n                    console.log(\"纬度：\" + res.latitude);\r\n                    console.log(\"经度：\" + res.longitude);\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n/**header */\r\n.headerinfo {\r\n    background: #ffffff;\r\n    z-index: 2;\r\n    height: 240rpx;\r\n    position: fixed;\r\n    width: 100%;\r\n    top: 0;\r\n    background-image: url(\"../../static/images/heardinfo.png\");\r\n    background-size: cover;\r\n}\r\n\r\n/**map */\r\n.map {\r\n    z-index: 2;\r\n    background: #ffffff;\r\n    position: fixed;\r\n    top: 280rpx;\r\n    width: 100%;\r\n    height: 300rpx;\r\n    padding-bottom: 10rpx;\r\n    padding-top: 10rpx;\r\n}\r\n\r\n.map>view {\r\n    height: 50rpx;\r\n    display: flex;\r\n    background: #ffffff;\r\n    padding-left: 20rpx;\r\n    padding-right: 20rpx;\r\n}\r\n\r\n.map>view>view {\r\n    padding-right: 40rpx;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n/**content */\r\n.foodList-content {\r\n    z-index: 1;\r\n    position: absolute;\r\n    top: 600rpx;\r\n    width: 100%;\r\n}\r\n\r\n.loading-page {\r\n    text-align: center;\r\n    margin-top: 250rpx\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.5.20200314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1598927457986\n      var cssReload = require(\"D:/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}